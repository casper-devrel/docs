"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[6004],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return h}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),c=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},l=function(e){var t=c(e.components);return r.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,h=d["".concat(p,".").concat(m)]||d[m]||u[m]||o;return n?r.createElement(h,s(s({ref:t},l),{},{components:n})):r.createElement(h,s({ref:t},l))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[d]="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2511:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return p},default:function(){return h},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return d}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),s=["components"],i={title:"Node Events"},p="The Node's Event Stream",c={unversionedId:"operators/setup/node-events",id:"operators/setup/node-events",title:"Node Events",description:"Each Casper node streams events through the SSE (Server Sent Event) server via an /events endpoint and the port specified as the eventstreamserver.address in the node's config.toml. This port is by default 9999 for nodes on Testnet and Mainnet.",source:"@site/source/docs/casper/operators/setup/node-events.md",sourceDirName:"operators/setup",slug:"/operators/setup/node-events",permalink:"/operators/setup/node-events",draft:!1,editUrl:"https://github.com/casper-network/docs/tree/dev/source/docs/casper/operators/setup/node-events.md",tags:[],version:"current",lastUpdatedAt:1718375753,formattedLastUpdatedAt:"Jun 14, 2024",frontMatter:{title:"Node Events"},sidebar:"operators",previous:{title:"Non-Root Users",permalink:"/operators/setup/non-root-user"},next:{title:"Sidecar Setup",permalink:"/operators/setup/casper-sidecar"}},l={},d=[{value:"Monitoring a Node&#39;s Event Stream",id:"monitoring-a-nodes-event-stream",level:2},{value:"Replaying the Event Stream",id:"replaying-the-event-stream",level:2}],u={toc:d},m="wrapper";function h(e){var t=e.components,n=(0,a.Z)(e,s);return(0,o.kt)(m,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"the-nodes-event-stream"},"The Node's Event Stream"),(0,o.kt)("p",null,"Each Casper node streams events through the SSE (Server Sent Event) server via an ",(0,o.kt)("inlineCode",{parentName:"p"},"/events")," endpoint and the port specified as the ",(0,o.kt)("inlineCode",{parentName:"p"},"event_stream_server.address")," in the node's ",(0,o.kt)("em",{parentName:"p"},"config.toml"),". This port is by default ",(0,o.kt)("inlineCode",{parentName:"p"},"9999")," for nodes on ",(0,o.kt)("a",{parentName:"p",href:"https://testnet.cspr.live/tools/peers"},"Testnet")," and ",(0,o.kt)("a",{parentName:"p",href:"https://cspr.live/tools/peers"},"Mainnet"),"."),(0,o.kt)("h2",{id:"monitoring-a-nodes-event-stream"},"Monitoring a Node's Event Stream"),(0,o.kt)("p",null,"As an operator, you can use cURL to monitor the event stream on a node."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -s http://HOST:PORT/events/\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"HOST")," - The IP address of a node on the network."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"PORT")," - The port specified as the ",(0,o.kt)("inlineCode",{parentName:"li"},"event_stream_server.address")," in the node's ",(0,o.kt)("em",{parentName:"li"},"config.toml"),".")),(0,o.kt)("p",null,"Another helpful tool is the ",(0,o.kt)("a",{parentName:"p",href:"/operators/setup/casper-sidecar"},"Casper Sidecar"),", which provides the recommended way to monitor events on a node. Visit the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/USAGE.md#the-sidecar-event-stream"},"Casper Sidecar Usage Guide")," for a detailed list of events and REST queries you can use to monitor the node and the state of the network."),(0,o.kt)("h2",{id:"replaying-the-event-stream"},"Replaying the Event Stream"),(0,o.kt)("p",null,"This command will replay the event stream from an old event onward. If the ID is 0 or if you specify an event ID already purged from the cache, the server will replay all the cached events. Replace the ",(0,o.kt)("inlineCode",{parentName:"p"},"HOST"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"PORT"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"ID")," fields with the needed values."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -sN http://HOST:PORT/events?start_from=ID\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Example:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -sN http://65.21.235.219:9999/events?start_from=29267508\n")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The node stores only a limited number of events in its cache, which can be configured using the ",(0,o.kt)("inlineCode",{parentName:"p"},"event_stream_buffer_length")," in the ",(0,o.kt)("em",{parentName:"p"},"config.toml"),". The intended use case is to allow the Sidecar consuming the event stream to reconnect (if it loses its connection) and catch up with the events emitted while it was disconnected."),(0,o.kt)("p",{parentName:"admonition"},"The ",(0,o.kt)("a",{parentName:"p",href:"/operators/setup/casper-sidecar"},"Casper Sidecar")," may store additional events depending on how it was configured.")))}h.isMDXComponent=!0}}]);