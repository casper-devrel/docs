"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[2354],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},f=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=l(n),f=r,d=p["".concat(c,".").concat(f)]||p[f]||m[f]||a;return n?o.createElement(d,s(s({ref:t},u),{},{components:n})):o.createElement(d,s({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=f;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[p]="string"==typeof e?e:r,s[1]=i;for(var l=2;l<a;l++)s[l]=n[l];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}f.displayName="MDXCreateElement"},8871:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return d},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return p}});var o=n(7462),r=n(3366),a=(n(7294),n(3905)),s=["components"],i={title:"Runtime",slug:"/runtime"},c="Runtime Economics",l={unversionedId:"concepts/economics/runtime",id:"concepts/economics/runtime",title:"Runtime",description:"The economics of the runtime layer should incentivize efficient allocation of computational resources, primarily CPU time, to users.",source:"@site/source/docs/casper/concepts/economics/runtime.md",sourceDirName:"concepts/economics",slug:"/runtime",permalink:"/docs/runtime",draft:!1,editUrl:"https://github.com/casper-network/docs/tree/dev/source/docs/casper/concepts/economics/runtime.md",tags:[],version:"current",lastUpdatedAt:1714127493,formattedLastUpdatedAt:"Apr 26, 2024",frontMatter:{title:"Runtime",slug:"/runtime"},sidebar:"concepts",previous:{title:"Consensus",permalink:"/docs/concepts/economics/consensus"},next:{title:"Gas Cost",permalink:"/docs/concepts/economics/gas-concepts"}},u={},p=[{value:"Gas allocation",id:"gas-allocation",level:2},{value:"Consensus before execution &amp; basics of payment",id:"consensus-before-execution--basics-of-payment",level:3},{value:"Costs and limits",id:"costs-and-limits",level:3},{value:"Lanes",id:"lanes",level:3},{value:"Gas fees",id:"gas-fees",level:2}],m={toc:p},f="wrapper";function d(e){var t=e.components,n=(0,r.Z)(e,s);return(0,a.kt)(f,(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"runtime-economics"},"Runtime Economics"),(0,a.kt)("p",null,"The economics of the runtime layer should incentivize efficient allocation of computational resources, primarily CPU time, to users. "),(0,a.kt)("p",null,"Currently, ",(0,a.kt)("a",{parentName:"p",href:"/docs/concepts/economics/gas-concepts"},"gas")," is allocated according to a first-in, first-out model for transactions. "),(0,a.kt)("h2",{id:"gas-allocation"},"Gas allocation"),(0,a.kt)("p",null,"Any finite resource on a publicly accessible computer network must be rate-limited, as, otherwise, overuse of this resource is an attack vector ","-","- a minimal requirement for platform security. However, rate-limiting, implemented on our platform as a simple block gas limit with several lanes, leaves the platform with the problem of fairly and efficiently allocating the gas. We are researching the optimal structure for spot and futures gas markets, and interested readers should consult the relevant ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/casper-network/ceps"},"CEPs"),". In the meantime, this section outlines some basic features of the platform that would underpin any allocation scheme."),(0,a.kt)("h3",{id:"consensus-before-execution--basics-of-payment"},"Consensus before execution & basics of payment"),(0,a.kt)("p",null,"The Zug and Highway protocols reach consensus on a block ",(0,a.kt)("em",{parentName:"p"},"before")," the block is executed, introducing a subtle difference from platforms like Ethereum. In addition, transactions sent to a Casper network can only be selected based on claimed, rather than used, gas."),(0,a.kt)("p",null,"Additionally, a minimal amount of CSPR must be present in the user account or contract's main purse to cover the payment computation. The community may introduce additional balance checks in the future."),(0,a.kt)("h3",{id:"costs-and-limits"},"Costs and limits"),(0,a.kt)("p",null,"Gas cost is a measure of the relative time used by different primitive operations of the execution engine, which is also assumed to be additive. By additivity, we mean that the time to execute a program is approximately proportional to the sum of gas expended by the opcodes and functions called within the program. Casper assigns gas costs to primitive execution engine opcodes and specific, more complex ",(0,a.kt)("em",{parentName:"p"},"host-side")," functions that are callable from within the execution engine context. Gas costs for opcodes and host-side functions are specified in the ",(0,a.kt)("a",{parentName:"p",href:"/docs/concepts/glossary/C#chainspec"},"chainspec")," and may vary according to arguments."),(0,a.kt)("p",null,"We expect to refine the current gas cost table to reflect time use more closely, with updates introduced in future upgrades."),(0,a.kt)("h3",{id:"lanes"},"Lanes"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/casper-network/casper-node/blob/b94c4f79ac4ca00e996c418dcc3a98607779a193/resources/production/chainspec.toml#L96-L97"},"block gas limit")," is split into two lanes, one for native transfers and one for general transactions. The number of transfers, which cost a fixed amount of gas, is governed directly by the ",(0,a.kt)("inlineCode",{parentName:"p"},"block_max_transfer_count")," chainspec parameter, set to 2500 on Mainnet. "),(0,a.kt)("h2",{id:"gas-fees"},"Gas fees"),(0,a.kt)("p",null,"See ",(0,a.kt)("a",{parentName:"p",href:"/docs/concepts/economics/gas-concepts"},"Gas"),". "))}d.isMDXComponent=!0}}]);