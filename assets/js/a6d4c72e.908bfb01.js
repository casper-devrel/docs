"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[2691],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||s;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,i=new Array(s);i[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:r,i[1]=o;for(var c=2;c<s;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(7294),r=n(6010),s={tabItem:"tabItem_Ymn6"};function i(e){var t=e.children,n=e.hidden,i=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(s.tabItem,i),hidden:n},t)}},4866:function(e,t,n){n.d(t,{Z:function(){return y}});var a=n(7462),r=n(7294),s=n(6010),i=n(2466),o=n(6550),l=n(1980),c=n(7392),p=n(12);function u(e){return function(e){var t,n;return null!=(t=null==(n=r.Children.map(e,(function(e){if(!e||(0,r.isValidElement)(e)&&(t=e.props)&&"object"==typeof t&&"value"in t)return e;var t;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}function d(e){var t=e.values,n=e.children;return(0,r.useMemo)((function(){var e=null!=t?t:u(n);return function(e){var t=(0,c.l)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function m(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function h(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId,s=(0,o.k6)(),i=function(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:a});return[(0,l._X)(i),(0,r.useCallback)((function(e){if(i){var t=new URLSearchParams(s.location.search);t.set(i,e),s.replace(Object.assign({},s.location,{search:t.toString()}))}}),[i,s])]}function v(e){var t,n,a,s,i=e.defaultValue,o=e.queryString,l=void 0!==o&&o,c=e.groupId,u=d(e),v=(0,r.useState)((function(){return function(e){var t,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var r=null!=(t=a.find((function(e){return e.default})))?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:i,tabValues:u})})),f=v[0],g=v[1],b=h({queryString:l,groupId:c}),k=b[0],N=b[1],y=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:c}.groupId),n=(0,p.Nk)(t),a=n[0],s=n[1],[a,(0,r.useCallback)((function(e){t&&s.set(e)}),[t,s])]),E=y[0],S=y[1],T=function(){var e=null!=k?k:E;return m({value:e,tabValues:u})?e:null}();return(0,r.useLayoutEffect)((function(){T&&g(T)}),[T]),{selectedValue:f,selectValue:(0,r.useCallback)((function(e){if(!m({value:e,tabValues:u}))throw new Error("Can't select invalid tab value="+e);g(e),N(e),S(e)}),[N,S,u]),tabValues:u}}var f=n(2389),g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b(e){var t=e.className,n=e.block,o=e.selectedValue,l=e.selectValue,c=e.tabValues,p=[],u=(0,i.o5)().blockElementScrollPositionUntilNextRender,d=function(e){var t=e.currentTarget,n=p.indexOf(t),a=c[n].value;a!==o&&(u(t),l(a))},m=function(e){var t,n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var a,r=p.indexOf(e.currentTarget)+1;n=null!=(a=p[r])?a:p[0];break;case"ArrowLeft":var s,i=p.indexOf(e.currentTarget)-1;n=null!=(s=p[i])?s:p[p.length-1]}null==(t=n)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":n},t)},c.map((function(e){var t=e.value,n=e.label,i=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,key:t,ref:function(e){return p.push(e)},onKeyDown:m,onClick:d},i,{className:(0,s.Z)("tabs__item",g.tabItem,null==i?void 0:i.className,{"tabs__item--active":o===t})}),null!=n?n:t)})))}function k(e){var t=e.lazy,n=e.children,a=e.selectedValue,s=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){var i=s.find((function(e){return e.props.value===a}));return i?(0,r.cloneElement)(i,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},s.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})})))}function N(e){var t=v(e);return r.createElement("div",{className:(0,s.Z)("tabs-container",g.tabList)},r.createElement(b,(0,a.Z)({},e,t)),r.createElement(k,(0,a.Z)({},e,t)))}function y(e){var t=(0,f.Z)();return r.createElement(N,(0,a.Z)({key:String(t)},e))}},9827:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return u},default:function(){return g},frontMatter:function(){return p},metadata:function(){return d},toc:function(){return h}});var a=n(7462),r=n(3366),s=(n(7294),n(3905)),i=n(4866),o=n(5162),l=n(4996),c=["components"],p={title:"Monitoring Events with the Casper Sidecar"},u=void 0,d={unversionedId:"developers/dapps/monitor-and-consume-events",id:"developers/dapps/monitor-and-consume-events",title:"Monitoring Events with the Casper Sidecar",description:"The Casper platform uses event streaming to signal state changes in smart contracts and nodes. Using the Casper Sidecar service and client-side SDKs, dApps actively listening for emitted events can consume them and perform actions based on event data.",source:"@site/source/docs/casper/developers/dapps/monitor-and-consume-events.md",sourceDirName:"developers/dapps",slug:"/developers/dapps/monitor-and-consume-events",permalink:"/docs/developers/dapps/monitor-and-consume-events",draft:!1,editUrl:"https://github.com/casper-network/docs/tree/dev/source/docs/casper/developers/dapps/monitor-and-consume-events.md",tags:[],version:"current",lastUpdatedAt:1718375458,formattedLastUpdatedAt:"Jun 14, 2024",frontMatter:{title:"Monitoring Events with the Casper Sidecar"},sidebar:"developers",previous:{title:"Local Network Testing",permalink:"/docs/developers/dapps/nctl-test"},next:{title:"Interacting with the Blockchain",permalink:"/docs/developers/cli/"}},m={},h=[{value:"The Casper Sidecar",id:"the-casper-sidecar",level:2},{value:"The Event Stream",id:"the-event-stream",level:2},{value:"Listening to the Event Stream",id:"listening-to-the-event-stream",level:3},{value:"Detecting Contract-Level Events",id:"detecting-contract-level-events",level:3},{value:"Reacting to Events",id:"reacting-to-events",level:3},{value:"Unsubscribing from Events",id:"unsubscribing-from-events",level:3},{value:"Stopping the Event Stream",id:"stopping-the-event-stream",level:3},{value:"Replaying the Sidecar Event Stream",id:"replaying-the-sidecar-event-stream",level:3},{value:"The JSON-RPC API",id:"the-json-rpc-api",level:2},{value:"The REST API",id:"the-rest-api",level:2},{value:"Troubleshooting Tips",id:"troubleshooting-tips",level:2}],v={toc:h},f="wrapper";function g(e){var t=e.components,n=(0,r.Z)(e,c);return(0,s.kt)(f,(0,a.Z)({},v,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"monitoring-and-consuming-events"},"Monitoring and Consuming Events"),(0,s.kt)("p",null,"The Casper platform uses ",(0,s.kt)("a",{parentName:"p",href:"/docs/operators/setup/node-events"},"event streaming")," to signal state changes in smart contracts and nodes. Using the ",(0,s.kt)("a",{parentName:"p",href:"#the-casper-sidecar"},"Casper Sidecar")," service and client-side SDKs, dApps actively listening for emitted events can consume them and perform actions based on event data."),(0,s.kt)("p",null,"Smart contracts can also emit contract-level events, as explained ",(0,s.kt)("a",{parentName:"p",href:"/docs/developers/writing-onchain-code/emitting-contract-events"},"here"),". DApps can consume these events by listening to the event stream, detecting ",(0,s.kt)("a",{parentName:"p",href:"#deployprocessed"},"TransactionProcessed")," events, and parsing the ",(0,s.kt)("inlineCode",{parentName:"p"},"messages")," array storing String-representations of the emitted events."),(0,s.kt)("h2",{id:"the-casper-sidecar"},"The Casper Sidecar"),(0,s.kt)("p",null,"The Casper Sidecar is an application running alongside the node process. It allows subscribers to monitor a node's event stream, query stored events, and query the node's JSON-RPC API, thus receiving faster responses and reducing the load placed on the node. The Sidecar supports the following functionalities:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"A ",(0,s.kt)("a",{parentName:"li",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/README.md#the-sse-server"},"server-sent events (SSE) endpoint")," with an ",(0,s.kt)("inlineCode",{parentName:"li"},"/events")," endpoint streaming events from all the connected nodes. The Sidecar also stores these events."),(0,s.kt)("li",{parentName:"ul"},"A ",(0,s.kt)("a",{parentName:"li",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/README.md#the-rest-api-server"},"REST API server")," that allows clients to query stored events."),(0,s.kt)("li",{parentName:"ul"},"A ",(0,s.kt)("a",{parentName:"li",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/README.md#the-rpc-api-server"},"JSON-RPC API")," to interact with a Casper node."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/LEGACY_SSE_EMULATION.md"},"Legacy emulation")," for clients using older versions of the SSE API.")),(0,s.kt)("img",{class:"align-center",src:(0,l.Z)("/image/operators/sidecar-diagram.png"),alt:"Sidecar components and architecture diagram",width:"800"}),(0,s.kt)("p",null,"Visit ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/casper-network/casper-sidecar/"},"GitHub")," for the latest source code and information on:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/README.md#system-components--architecture"},"System architecture")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/README.md#configuring-the-sidecar"},"Configuring the Sidecar")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/README.md#running-and-testing-the-sidecar"},"Running and testing")," the Sidecar"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/README.md#swagger-documentation"},"Swagger documentation")," for its REST API"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/README.md#openapi-specification"},"OpenAPI schema")," for the JSON-RPC API"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/README.md#troubleshooting-tips"},"Troubleshooting tips"))),(0,s.kt)("h2",{id:"the-event-stream"},"The Event Stream"),(0,s.kt)("p",null,"Casper nodes offer an event stream API that returns server-sent events (SSEs) with JSON-encoded data. The Sidecar reads the event stream of all connected nodes, acting as a passthrough and replicating the SSE interface of the connected nodes."),(0,s.kt)("p",null,"The Sidecar can:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Republish the current events from the node to clients listening to Sidecar's SSE API."),(0,s.kt)("li",{parentName:"ul"},"Publish a configurable number of previous events to clients connecting to the Sidecar's SSE API with ",(0,s.kt)("inlineCode",{parentName:"li"},"?start_from=")," query (similar to the node's SSE API)."),(0,s.kt)("li",{parentName:"ul"},"Store the events in external storage so clients can query them via the REST API.")),(0,s.kt)("p",null,"The Sidecar also provides an endpoint for Sidecar-generated events that can be useful, although the node did not emit them. "),(0,s.kt)("p",null,"To summarize, events are divided into two categories and emitted on their respective endpoints:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Node-generated events")," - All events coming from connected node(s) are emitted on the ",(0,s.kt)("inlineCode",{parentName:"li"},"events")," endpoint. The default URL to consume these events on a Mainnet or Testnet node is usually ",(0,s.kt)("inlineCode",{parentName:"li"},"http://HOST:19999/events/"),". This URL depends on how the Sidecar was configured on the node."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Sidecar-generated events")," - The Sidecar also emits events on the ",(0,s.kt)("inlineCode",{parentName:"li"},"events/sidecar")," endpoint, designated for events originating solely from the Sidecar service. The URL to consume these events using Sidecar on a Mainnet or Testnet node is usually ",(0,s.kt)("inlineCode",{parentName:"li"},"http://HOST:19999/events/sidecar/"),". This URL depends on how the Sidecar was configured on the node.")),(0,s.kt)("p",null,"The ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/USAGE.md"},"Casper Sidecar Usage Guide")," describes each event type in detail."),(0,s.kt)("h3",{id:"listening-to-the-event-stream"},"Listening to the Event Stream"),(0,s.kt)("p",null,"Set up an event listener in your dApp using the following code to consume the event stream. The ",(0,s.kt)("inlineCode",{parentName:"p"},"NODE_ADDRESS")," is the address of the node where the Sidecar was installed. The ",(0,s.kt)("inlineCode",{parentName:"p"},"PORT")," is the address where the Sidecar streams events. It is ",(0,s.kt)("inlineCode",{parentName:"p"},"19999")," by default, but you must find out how the Sidecar was configured."),(0,s.kt)(i.Z,{mdxType:"Tabs"},(0,s.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},'const { EventStream, EventName } = require("casper-js-sdk")\n\nconst es = new EventStream("http://NODE_ADDRESS:PORT/events/")\nes.start()\nes.subscribe(EventName.EVENT_NAME, eventHandler)\n\nconst eventHandler = (event) => {\n    console.log(event)\n}\n'))),(0,s.kt)(o.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python"},'from pycspr import NodeClient, NodeConnection, NodeEventType\n\ndef eventHandler(event):\n    print(event)\n\nclient = NodeClient(NodeConnection(host = "NODE_ADDRESS", port_rpc = "PORT"))\nclient.get_events(eventHandler, NodeEventType.EVENT_NAME)\n'))),(0,s.kt)(o.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"curl -s http://NODE_ADDRESS:PORT/events/\n")))),(0,s.kt)("p",null,"You can find node addresses of active online peers to replace ",(0,s.kt)("inlineCode",{parentName:"p"},"NODE_ADDRESS"),", by navigating to ",(0,s.kt)("a",{parentName:"p",href:"https://cspr.live/tools/peers"},"cspr.live")," for Mainnet and ",(0,s.kt)("a",{parentName:"p",href:"https://testnet.cspr.live/tools/peers"},"testnet.cspr.live")," for Testnet."),(0,s.kt)("p",null,"Replace ",(0,s.kt)("inlineCode",{parentName:"p"},"EVENT_NAME")," with one of the event types listed ",(0,s.kt)("a",{parentName:"p",href:"#event-types"},"below"),"."),(0,s.kt)("h3",{id:"detecting-contract-level-events"},"Detecting Contract-Level Events"),(0,s.kt)("p",null,"The Sidecar streams messages emitted by a contract in a human-readable format. These messages are visible as part of the ",(0,s.kt)("inlineCode",{parentName:"p"},"TransactionProcessed")," event after the corresponding block is processed and added to the blockchain. For more details, see ",(0,s.kt)("a",{parentName:"p",href:"/docs/developers/writing-onchain-code/emitting-contract-events#verifying-a-topic"},"Verifying a Topic")," and ",(0,s.kt)("a",{parentName:"p",href:"/docs/developers/writing-onchain-code/emitting-contract-events#verifying-a-message"},"Verifying a Message"),"."),(0,s.kt)("h3",{id:"reacting-to-events"},"Reacting to Events"),(0,s.kt)("p",null,"An application may parse each event needed for its use case and respond accordingly. Each event type contains additional data that might help decide whether to take action. For example, ",(0,s.kt)("inlineCode",{parentName:"p"},"TransactionAccepted")," events contain the account's public key that submitted the transaction, the contract address, and more. This information can help determine how to proceed."),(0,s.kt)(i.Z,{mdxType:"Tabs"},(0,s.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},'const eventHandler = (event) => {\n  if (event.body.TransactionAccepted.header.account == "012481699f9231e36ecf002675cd7186b48e6a735d10ec1b30f587ca716937752c") {\n    // Perform an action\n  }\n}\n'))),(0,s.kt)(o.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python"},'def eventHandler(event):\n  if event["TransactionAccepted"]["header"]["account"] == "012481699f9231e36ecf002675cd7186b48e6a735d10ec1b30f587ca716937752c":\n    # Perform an action\n')))),(0,s.kt)("h3",{id:"unsubscribing-from-events"},"Unsubscribing from Events"),(0,s.kt)("p",null,"In many cases, an application may need to unsubscribe after a particular time or may want to unsubscribe from some events but not others. The Casper SDKs provide this ability with the ",(0,s.kt)("inlineCode",{parentName:"p"},"unsubscribe")," function:"),(0,s.kt)(i.Z,{mdxType:"Tabs"},(0,s.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},"es.unsubscribe(EventName.EVENT_NAME)\n")))),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"EVENT_NAME")," - One of the different ",(0,s.kt)("a",{parentName:"li",href:"#event-types"},"event types")," emitted by a Casper node.")),(0,s.kt)("h3",{id:"stopping-the-event-stream"},"Stopping the Event Stream"),(0,s.kt)("p",null,"A dApp may cease listening to all events using the ",(0,s.kt)("inlineCode",{parentName:"p"},"stop")," function:"),(0,s.kt)(i.Z,{mdxType:"Tabs"},(0,s.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},"es.stop()\n")))),(0,s.kt)("h3",{id:"replaying-the-sidecar-event-stream"},"Replaying the Sidecar Event Stream"),(0,s.kt)("p",null,"This command will replay the event stream from an old event onward. Replace the ",(0,s.kt)("inlineCode",{parentName:"p"},"NODE_ADDRESS"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"PORT"),", and ",(0,s.kt)("inlineCode",{parentName:"p"},"ID")," fields with the values of your scenario."),(0,s.kt)(i.Z,{mdxType:"Tabs"},(0,s.kt)(o.Z,{value:"curl",label:"cURL",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"curl -s http://NODE_ADDRESS:PORT/events?start_from=ID\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Example:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"curl -sN http://65.21.235.219:19999/events?start_from=29267508\n")),(0,s.kt)("p",null,"Note that certain shells like ",(0,s.kt)("inlineCode",{parentName:"p"},"zsh")," may require an escape character before the question mark:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"curl -sN http://65.21.235.219:19999/events?start_from=29267508\n")))),(0,s.kt)("p",null,"The server will replay all the cached events if the ID is 0 or if you specify an event ID already purged from the cache."),(0,s.kt)("h2",{id:"the-json-rpc-api"},"The JSON-RPC API"),(0,s.kt)("p",null,"The Sidecar also offers a JSON-RPC API server for clients to interact with a Casper network. It is a JSON bridge between end users and a Casper node's binary port, forwarding requests to the Casper node's binary port. For more details on how the JSON-RPC API works, see the ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/json_rpc/README.md"},"JSON-RPC README"),"."),(0,s.kt)("h2",{id:"the-rest-api"},"The REST API"),(0,s.kt)("p",null,"The Sidecar offers a REST API to query stored events. You can discover the specific endpoints of the REST API using ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/casper-network/casper-sidecar/tree/feat-2.0?tab=readme-ov-file#openapi-specification"},"OpenAPI")," and ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/casper-network/casper-sidecar/tree/feat-2.0?tab=readme-ov-file#swagger-documentation"},"Swagger"),". The ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/USAGE.md"},"usage instructions")," in the repository provide more details."),(0,s.kt)("img",{class:"align-center",src:(0,l.Z)("/image/operators/sidecar-swagger-1.png"),alt:"Sidecar components and architecture diagram",width:"800"}),(0,s.kt)("img",{class:"align-center",src:(0,l.Z)("/image/operators/sidecar-swagger-2.png"),alt:"Sidecar components and architecture diagram",width:"800"}),(0,s.kt)("h2",{id:"troubleshooting-tips"},"Troubleshooting Tips"),(0,s.kt)("p",null,"For troubleshooting tips, visit ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/casper-network/casper-sidecar/blob/feat-2.0/README.md#troubleshooting-tips"},"Github"),"."))}g.isMDXComponent=!0}}]);